{% extends "base.html" %}
{% block content %}
<h2>Receiving Records</h2>
<a class="bubble-btn" href="{{ url_for('receiving.add_receiving') }}">+ Add Receiving</a>

<table>
  <tr>
    <th>Date</th>
    <th>SKU</th>
    <th>Item</th>
    <th>Lot Number</th>
    <th>Qty</th>
    <th>Person</th>
    <th>PO Number</th>
    <th>Location</th>
    <th>Actions</th>
  </tr>
  {% for r in records %}
  <tr>
    <td>{{ r.date.strftime('%Y-%m-%d %H:%M') }}</td>
    <td>{{ r.item.sku if r.item else '???' }}</td>
    <td>{{ r.item.name if r.item else 'Unknown Item' }}</td>
    <td>{{ r.batch.lot_number if r.batch else '-' }}</td>
    <td>{{ r.quantity }}</td>
    <td>{{ r.person or '-' }}</td>
    <td>{{ r.po_number or '-' }}</td>
    <td>{{ r.location.code if r.location else '-' }}</td>
    <td>
      <form method="post" action="{{ url_for('receiving.reprint_receipt', receipt_id=r.id) }}">
        <button type="submit" class="bubble-btn">Reprint Label</button>
      </form>
    </td>
  </tr>
  {% endfor %}
  {% if records|length == 0 %}
  <tr>
    <td colspan="9">No receiving records found.</td>
  </tr>
  {% endif %}
</table>
<div class="pagination">
  {% if page > 1 %}
    <a href="{{ url_for('receiving.receiving_home', page=page-1, size=size) }}">Previous</a>
  {% endif %}
  {% if page < pages %}
    <a href="{{ url_for('receiving.receiving_home', page=page+1, size=size) }}">Next</a>
  {% endif %}
</div>
{% endblock %}
