{% extends "base.html" %}

{% block content %}
<h2>Operations Menu</h2>
<p>Select a destination to manage settings, reports, or administrator tools.</p>
{% set has_admin_access = session.get('is_admin') or (current_user.is_authenticated and current_user.has_role('admin')) %}

<div class="button-grid">
    <a href="{{ url_for('settings.settings_home') }}" class="action-btn">Settings</a>
    <a href="{{ url_for('reports.reports_home') }}" class="action-btn">Reports</a>
    <a href="{{ url_for('production.daily_entry') }}" class="action-btn">Daily Production Entry</a>
    <a href="{{ url_for('production.history') }}" class="action-btn">Production History</a>
    <a href="{{ url_for('production.production_settings') }}" class="action-btn">Production Settings</a>

    {% if has_admin_access %}
        <a href="{{ url_for('admin.manage_users') }}" class="action-btn">Manage Accounts</a>
        <a href="{{ url_for('admin.data_backup') }}" class="action-btn">Data Backup</a>
        <a href="{{ url_for('printers.printer_settings') }}" class="action-btn">Admin Tools</a>
        {% if session.get('is_admin') %}
            <a href="{{ url_for('admin.logout', next=request.path) }}" class="action-btn">Admin Logout</a>
        {% endif %}
    {% else %}
        {% if request.endpoint != 'admin.login' %}
            {% set admin_login_url = url_for('admin.login', next=request.path) %}
        {% else %}
            {% set admin_login_url = url_for('admin.login') %}
        {% endif %}
        <a href="{{ admin_login_url }}" class="action-btn">Admin Login</a>
    {% endif %}
</div>
{% endblock %}
