{% extends "base.html" %}
{% import 'mdi/components/assets.html' as mdi_assets %}

{% block title %}Meeting View | MDI Console{% endblock %}

{% block content_card_class %}content-card--mdi{% endblock %}

{% block extra_head %}
  {{ super() }}
  {{ mdi_assets.head_assets() }}
{% endblock %}

{% block extra_scripts %}
  {{ super() }}
  {{ mdi_assets.script_assets() }}
  <script src="{{ url_for('mdi.static', filename='js/materials.js') }}" defer></script>
{% endblock %}

{% block content %}
  <div class="container py-3">
    {% include 'components/category_header.html' %}

    <div
      class="card shadow-sm border-0 mb-4"
      id="materials-summary"
      data-summary-url="{{ materials_summary_url }}"
      data-item-shortages-url="{{ item_shortages_url }}"
    >
      <div class="card-body">
        <div class="d-flex flex-column flex-md-row justify-content-between gap-3">
          <div>
            <h2 class="h5 mb-1">Item Shortages Summary</h2>
            <p class="text-muted mb-0">
              Live counts and quantities sourced from the Item Shortages module.
            </p>
          </div>
          <div class="d-flex align-items-start">
            <a class="btn btn-sm btn-outline-primary" href="{{ item_shortages_url }}">
              View Item Shortages
            </a>
          </div>
        </div>
        <div class="mt-4" data-summary-content>
          <div class="text-muted">Loading material shortagesâ€¦</div>
        </div>
      </div>
    </div>

    <div class="alert alert-secondary shadow-sm border-0 mb-0">
      Status counts update automatically as Item Shortages change.
    </div>
  </div>
{% endblock %}
