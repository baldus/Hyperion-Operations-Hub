{% extends "base.html" %}
{% block content %}
<h2>Enter Physical Counts â€” Snapshot #{{ snapshot.id }}</h2>
<p class="field-note">Enter counted totals for each item. Leave blank if not yet counted.</p>
<form method="POST">
  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr>
          <th>Item</th>
          <th>Location</th>
          <th>ERP Total</th>
          <th>Counted Total</th>
        </tr>
      </thead>
      <tbody>
        {% for line in lines %}
        <tr>
          <td>{{ line.item.name if line.item else 'Unknown Item' }}</td>
          <td>{{ line.item.default_location.code if line.item and line.item.default_location else 'UNLOCATED' }}</td>
          <td>{{ line.erp_quantity }}</td>
          <td>
            <input type="number" step="0.01" name="counted_{{ line.id }}" class="form-control form-control-sm" value="{{ line.counted_quantity if line.counted_quantity is not none else '' }}">
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <button type="submit" class="btn btn-primary">Save Counts</button>
  <a href="{{ url_for('inventory.physical_inventory_snapshot', snapshot_id=snapshot.id) }}" class="btn btn-secondary">Back to Snapshot</a>
</form>
{% endblock %}
