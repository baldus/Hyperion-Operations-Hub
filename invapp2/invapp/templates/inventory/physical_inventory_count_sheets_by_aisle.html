{% extends "base.html" %}
{% block content %}
<h2>Count Sheets (By Aisle) â€” Snapshot #{{ snapshot.id }}</h2>
<form method="get" class="row g-3 align-items-end mb-3">
  <div class="col-auto">
    <label for="aisle" class="form-label">Aisle</label>
    <select id="aisle" name="aisle" class="form-select" onchange="this.form.submit()">
      {% for aisle in aisles %}
      <option value="{{ aisle }}" {% if aisle == selected_aisle %}selected{% endif %}>{{ aisle }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <button type="button" class="btn btn-outline-secondary" onclick="window.print()">Print this aisle</button>
  </div>
  <div class="col-auto">
    <a href="{{ url_for('inventory.physical_inventory_snapshot', snapshot_id=snapshot.id) }}" class="btn btn-secondary">Back to Snapshot</a>
  </div>
</form>

<div class="print-header">
  <h3>Physical Inventory Count Sheet</h3>
  <p class="mb-1">Snapshot #{{ snapshot.id }}</p>
  <p class="mb-1">Aisle: {{ selected_aisle }}</p>
  <p class="mb-0">Generated {{ snapshot.created_at.strftime('%Y-%m-%d') }}</p>
</div>

{% if rows %}
<div class="table-responsive">
  <table class="table table-sm">
    <thead>
      <tr>
        <th>Aisle</th>
        <th>Location Code</th>
        <th>Location Description</th>
        <th>Item Name</th>
        <th>Item Description</th>
        <th>SKU</th>
        <th>ERP Total Qty</th>
        <th>Counted Qty</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody>
      {% for row in rows %}
      <tr>
        <td>{{ row.aisle }}</td>
        <td>{{ row.location_code }}</td>
        <td>{{ row.location_description }}</td>
        <td>{{ row.item_name }}</td>
        <td>{{ row.item_description }}</td>
        <td>{{ row.sku }}</td>
        <td>{{ row.erp_quantity }}</td>
        <td></td>
        <td></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<p>No rows available for this aisle.</p>
{% endif %}
{% endblock %}

{% block extra_scripts %}
<style>
  @media print {
    body {
      background: #fff;
    }
    .print-header {
      margin-bottom: 1rem;
    }
    nav,
    .menu-grid,
    .btn,
    form,
    .action-btn,
    .nav-btn {
      display: none !important;
    }
  }
</style>
{% endblock %}
