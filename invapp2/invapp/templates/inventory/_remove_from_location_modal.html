<div id="removeFromLocationModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="removeFromLocationTitle">
  <div class="modal-content">
    <h3 id="removeFromLocationTitle">Remove from Location</h3>
    <div class="modal-body">
      <p><strong>Item:</strong> <span id="remove-item-label">-</span></p>
      <p><strong>Location:</strong> <span id="remove-location-label">-</span></p>
      <p><strong>Lot/Batch:</strong> <span id="remove-batch-label">-</span></p>
      <p><strong>Current Qty:</strong> <span id="remove-current-qty">0</span></p>
      <p id="remove-batch-note" class="muted" hidden>
        Partial removal requires a specific lot/batch selection.
      </p>
    </div>
    <form id="removeFromLocationForm" method="post" action="{{ url_for('inventory.remove_from_location') }}">
      <input type="hidden" name="item_id" id="remove-item-id">
      <input type="hidden" name="location_id" id="remove-location-id">
      <input type="hidden" name="batch_id" id="remove-batch-id">
      <input type="hidden" name="next" value="{{ next_url }}">

      <fieldset class="form-row">
        <legend class="muted">Removal amount</legend>
        <label>
          <input type="radio" name="remove_mode" id="remove-mode-all" value="all" checked>
          Remove ALL quantity from this location
        </label>
        <label>
          <input type="radio" name="remove_mode" id="remove-mode-partial" value="partial">
          Remove PARTIAL quantity
        </label>
      </fieldset>

      <div class="form-row" id="remove-partial-wrapper" hidden>
        <label for="remove-quantity">Quantity to remove</label>
        <input type="number" id="remove-quantity" name="quantity" step="0.001" min="0">
      </div>

      <div class="form-row">
        <label for="remove-reason">Reason</label>
        <select id="remove-reason" name="reason" required>
          <option value="">Select reason</option>
          {% for reason in remove_reasons %}
            <option value="{{ reason }}">{{ reason }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-row">
        <label for="remove-notes">Notes (optional)</label>
        <textarea id="remove-notes" name="notes" rows="3" placeholder="Add any additional details."></textarea>
      </div>

      <div class="modal-actions">
        <button type="button" class="bubble-btn" id="closeRemoveFromLocationModal">Cancel</button>
        <button type="submit" class="bubble-btn danger">Remove</button>
      </div>
    </form>
  </div>
</div>
