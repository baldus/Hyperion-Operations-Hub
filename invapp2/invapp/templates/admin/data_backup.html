{% extends "base.html" %}

{% block content %}
<h2>Data Backup</h2>
<p class="lead">Download a full backup of the system data or restore from a previous backup.</p>

<section aria-labelledby="export-title" class="card-section">
    <h3 id="export-title">Export Data</h3>
    <p>Download a compressed JSON backup of every table in the system.</p>
    <form method="post" action="{{ url_for('admin.export_data') }}">
        <button type="submit" class="action-btn">Download Backup</button>
    </form>
</section>

<section aria-labelledby="import-title" class="card-section">
    <h3 id="import-title">Import Data</h3>
    <p>Upload a backup file created by this tool to restore the system state. Both <code>.json</code> and <code>.json.gz</code> files are supported.</p>
    <form method="post" action="{{ url_for('admin.import_data') }}" enctype="multipart/form-data">
        <label for="backup-file" class="sr-only">Backup file</label>
        <input id="backup-file" type="file" name="backup_file" accept=".json,.json.gz,application/json,application/gzip" required>
        <button type="submit" class="action-btn">Upload Backup</button>
    </form>
</section>

<section aria-labelledby="tables-title" class="card-section">
    <h3 id="tables-title">Tables Included</h3>
    <ul class="table-list">
        {% for table_name in table_names %}
            <li>{{ table_name }}</li>
        {% endfor %}
    </ul>
</section>
{% endblock %}
